<!DOCTYPE html>
<meta charset="utf-8">
<head>
  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script> <!--D3 Library Import-->
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"> </script> <!--JQuery Library Import-->
  <link rel="stylesheet" type="text/css" href="style.css"> <!--External CSS Import-->
  <link href='https://fonts.googleapis.com/css?family=Roboto:400,300,500,100' rel='stylesheet' type='text/css'> <!-- Import Roboto Font -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous"> <!-- Import Bootstrap -->
  <script src="http://d3js.org/topojson.v1.min.js"></script> <!-- Import map JSON -->
</head>

<body>
<div class="container">
    <div class="row title-row">
        <div class="col-xs-12" id="title">
            <h1 class="center">Master of MVPs</h1>
            <h6 class="center">By Chris Traver, Rohit Biswas & Chris Vrabel</h6>
            <p class="center">A data visualization of NBA, NHL, MLB, and NBA most valuable players (MVPs) between 2000-2015.</p>
        </div>
    </div>
    <div class="row interactive-map">
        <div class="col-xs-12" id="mvp-picker"></div>
        <div id="instructions">
          <h3>Instructions</h3>
          <p>Begin by selecting a point on the map below.  Different sports are represented by different icons, and the locations
          of each icon represent the hometown of that MVP.</p>
          <p>You can zoom and pan using your mouse and the scroll wheel.  You can also hover over a data point
          to view bio information about that MVP.</p>
          <p>Next, click on an icon to load it into the detailed visualization below the map.</p>
          <button id="instructions-close">Lets go!</button>
        </div>
    </div>
    <div class="row player-visualizations">
        <div class="col-xs-12" id="mvp-stats"></div>
    </div>
    <div class="row player-visualizations2>"
        <div id="mvp-graphs">
        </div>
    </div>  
    <div class="row overall-stats-title">
        <div class="col-xs-12" >
                <h2 class="center">Overall Statistics</h2>
                <p class="center">There are many surprising commonalities between NHL, NBA, MLB, and NFL most valuable players.  Here
                is a breakdown of some interesting trends.</p>
        </div>
    </div>
    <div class="row overall-stats">
        <div class="col-xs-12 scatterplot-dropdowns">
          <h3 class="blue">Age & Salary Comparison</h3>
          <p>This graph explores the relationship between salary and a player's age at the time they were awarded MVP.
          <br>Hover over a datapoint to learn more about that MVP and use the interactive filters below to examine trends
          between different Colleges, Teams, and Sports.</p><br>
          <form>
          <span><strong>Filter By College: </strong></span><span class="college-dropdown"></span>
          <span><strong>Filter By Team: </strong></span><span class="team-dropdown"></span>
          <span><strong>Filter By Sport: </strong></span><span class="sport-dropdown"></span>
          <button type="reset" id="reset-button">Reset</button>
          </form>
        </div>
        <div class="col-xs-12 scatterplot"></div>
        <div class="col-xs-12 scatterplot-dropdowns">
          <h3 class="blue">MVP Characteristic Distributions</h3>
          <p>This graph explores the relationships between a variety of different characteristics about MVPs
          at the time they were awarded MVP.
          <br>Use the toggles below to interact with the data. "Grouped" shows differences between individual sports, while
          "Stacked" shows cumulative trends for all sports combined.</p><br>
          <form id="groupStackForm">
            <strong>Bar Arrangement</strong><br>
            <button type="button" class="histogramButton" value="grouped">Grouped</button>
            <button type="button" class="histogramButton" value="stacked">Stacked</button>
          </form>
          <br><br>
          <form id="categoryForm">
            <strong>Data Category</strong><br>
            <button type="button" class="histogramButton" value="Height">Height</button>
            <button type="button" class="histogramButton" value="Weight">Weight</button>
            <button type="button" class="histogramButton" value="Age">Age</button>
            <button type="button" class="histogramButton" value="Salary">Salary</button>
          </form>
        </div>
        <div class="col-xs-12 histogram" id="overall-stats"></div>
    </div>
    <div class="row conclusions">
        <div class="col-xs-12">
          <h1>Interesting Conclusions from Visualizations</h1>
          <p>
            <ul>
              <li>MVPs are clustered in parts of the USA (East Coast for all, Southwest for MLB). </li>
              <li>MVPs tend to specialize in scoring points rather than other stats, as not all of their stats are
              above the league average for that season.</li>
              <li>MVPs in the NHL are not paid as much as MVPs in other leagues</li>
              <li>MVPs in the NHL and NBA are much younger than those in the MLB and NFL</li>
              <li>MVPs in the NHL never went to college</li>
            </ul>
          </p>
        </div>
    </div>
</div> 

</body>

<script>
//Setting up the map
var width = 1600,
  height = 400,
  scale0 = (width - 1) / 2 / Math.PI;

var projection = d3.geo.mercator();

//sets up zooming behavior
var zoom = d3.behavior.zoom()
  .translate([width / 2, height / 2])
  .scale(scale0)
  .scaleExtent([scale0, 24 * scale0])
  .on("zoom", zoomed);

var path = d3.geo.path()
  .projection(projection);

var svg = d3.select("#mvp-picker").append("svg")
  .attr("width", width)
  .attr("height", height)
  .attr("class", "map");

var g = svg.append("g");

//sets up tooltips for players
var tip = d3.select(".interactive-map").append("div")
  .attr("class", "tooltip")
  .style("opacity", 0);

svg.append("rect")
  .attr("class", "overlay")
  .attr("width", width)
  .attr("height", height);

svg.call(zoom).call(zoom.event);

//draws map
d3.json("resources/world-110m.json", function(error, world) {
  if (error) throw error;
  g.append("path")
    .datum({ type: "Sphere" })
    .attr("class", "sphere")
    .attr("d", path);
  g.append("path")
    .datum(topojson.merge(world, world.objects.countries.geometries))
    .attr("class", "land")
    .attr("d", path);
  g.append("path")
    .datum(topojson.mesh(world, world.objects.countries, function(a, b) { return a !== b;}))
    .attr("class", "boundary")
    .attr("d", path);
});

//removes instructions on click
d3.select("#instructions-close").on("click", function() {
  d3.select("#instructions").remove();
});

//Sets up statistcs svgs for each player
var margin = {top: 20, right: 50, bottom: 30, left: 50},
mvpWindowWidth = window.innerWidth;
mvpWindowHeight = 80;

//sets up mvp specific stats
var mvpWindow = d3.select("#mvp-stats").append("svg")
  .attr("width", mvpWindowWidth)
  .attr("height", mvpWindowHeight + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var mvpGraphWindow = d3.select("#mvp-graphs").append("svg")
  .attr("width", window.innerWidth/2)
  .attr("height", 470 + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

//dummy text for mvp windows
mvpGraphWindow.append("text").text("Click an MVP in the map above")
  .style("fill", "black")
  .style("font-size", "40px")
  .attr("y", 200);

mvpGraphWindow.append("text").text("to view their detailed stats")
  .style("fill", "black")
  .style("font-size", "40px")
  .attr("y", 240)
  .attr("x", 40);

//sets up trophies svg
var mvpTrophies = d3.select("#mvp-graphs").append("svg")
  .attr("width", 600)
  .attr("height", 470 + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

mvpTrophies.append("text").text("Click an MVP in the map above")
  .style("fill", "black")
  .style("font-size", "40px")
  .attr("y", 200);
mvpTrophies.append("text").text("to view their awards")
  .style("fill", "black")
  .style("font-size", "40px")
  .attr("y", 240)
  .attr("x", 100);

//allows for zooming functionality of map and points on map
function zoomed() {
  projection.translate(zoom.translate()).scale(zoom.scale());

  g.selectAll("path")
    .attr("d", path);

  svg.selectAll("image")
  .attr("x", function(d) {
    return projection([d.Longitude, d.Latitude])[0];
  }).attr("y", function(d) {
    return projection([d.Longitude, d.Latitude])[1];
  });
}

//helps fix some height variability issues with bootstrap
d3.select(self.frameElement).style("height", height + "px");

//variable used for testing outside in the console occasionally
var mvp_data;

d3.csv("data/mvp_list.csv", function(error, rows) {

  mvp_data = rows;

  //Removes duplicate entries for subsets of the mvp data (such as colleges, etc.) 
  //using a Set
  // c is the field in the csv that we wanted to extract mvp's from
  // optArray is used if a further filtered array (not mvp_data) were to be used 
  // (such as in the scatterplot)
  function remove_duplicates(field, optArray) {
    var mvp_data = rows;
    if (optArray) { mvp_data = optArray }
    mvp_data_copy = [];
    var set = new Set();
    if (Object.keys(mvp_data[0]).indexOf(field)==-1) {throw "Invalid Field";}
    for (var k = 0; k < mvp_data.length; k++) {
      if (!set.has(mvp_data[k][field])) {
        mvp_data_copy.push(mvp_data[k]);
        set.add(mvp_data[k][field]);
      }
    }
    return mvp_data_copy;
  }

  //Gets unique players (need ids for later)
  var playerPointsNoDup =
    svg.selectAll(".playerPoints").data(remove_duplicates("Player"), function(d) { return d.ID; });

  //adds players to map and adds data (in a hacky way through attributes)
  playerPointsNoDup
    .enter().append("image")
    .attr("x", function(d) {return projection([d.Longitude, d.Latitude])[0];})
    .attr("y", function(d) {return projection([d.Longitude, d.Latitude])[1];})
    .attr("name", function(d) {return d.Player;})
    .attr("hometown", function(d) {return d.Hometown;})
    .attr("age", function(d) {return d.Age;})
    .attr("pheight", function(d) {return d.Height;})
    .attr("weight", function(d) {return d.Weight;})
    .attr("team", function(d) {return d.Team;})
    .attr("college", function(d) {return d.College;})
    .attr("salary", function(d) {return d.Salary;})
    .attr("position", function(d) {return d.Position;})
    .attr("league", function(d) {return d.League;})
    .attr("season", function(d) {return d.Season;})
    .attr("width", 20)
    .attr("height", 20)
    .style("opacity", "0.4")
    .attr("xlink:href", function (d) {return "resources/images/" + d.League.toLowerCase() + ".png";});

  //adds tooltips to players (with info from attributes)
  playerPointsNoDup.on('mouseover', function() {
    var curr = d3.select(this);
    curr.style("opacity", "0.7");
    var name = curr.attr("name");
    var age = curr.attr("age");
    var hometown = curr.attr("hometown");
    var salary = curr.attr("salary");
    var weight = curr.attr("weight");
    var playerHeight = curr.attr("pheight");
    var team = curr.attr("team");
    var college = curr.attr("college");
    var position = curr.attr("position");

    tip.transition().duration(200).style("opacity", .9);
    
    tip.html("<img src='resources/images/player-photos/" + name.toLowerCase().split(' ').join('_') + ".jpg'" +
        "style='float: left;',  height=160, width=130> <h4>" +
        name + "</h4>" + "<br/>" +
        "<strong><u>Hometown:</u></strong>  " + hometown + "<br/>" +
        "<strong><u>Team:</u></strong>  " + team + "<br/>" +
        "<strong><u>Position:</u></strong>  " + position + "<br/>" +
        "<strong><u>Age:</u></strong>  " + age + "<br/>" +
        "<strong><u>Height:</u></strong>  " + playerHeight + "<br/>" +
        "<strong><u>Weight:</u></strong>  " + weight + " lbs<br/>" +
        "<strong><u>College:</u></strong>  " + college + "<br/>" +
        "<strong><u>Salary:</u></strong>  $" + salary + "<br/>")
      .style("left", (d3.event.pageX) + "px")
      .style("top", (d3.event.pageY - 28) + "px");
  });

  //removes tooltip
  playerPointsNoDup.on('mouseout', function() {
    d3.select(this).style("opacity", "0.4");
    svg.select("#playerLabel").remove();
    tip.transition().duration(500).style("opacity", 0);
  });

  //function to handle shoing the graphs for mvp specific stats and trophies
  playerPointsNoDup.on('click',function(){
    //null "pointers" handling
    if(!e) var e = window.event;
    e.cancelBubble = true;
    if(e.stopPropogation) e.stopPropogation();

    //clear windows for new stats
    mvpWindow.selectAll("*").remove();
    mvpGraphWindow.selectAll("*").remove();

    //get data through attributes
    var curr = d3.select(this);
    var name = curr.attr("name");
    var league = curr.attr("league");
    var position = curr.attr("position");
    var season = curr.attr("season");
    
    var spaceIndex = name.indexOf(' ');
    var firstName = name.substring(0, spaceIndex);
    var lastName = name.substring(spaceIndex+1, name.length);
    var filename = firstName.toLowerCase() + "_" + lastName.toLowerCase() + ".csv";

    //get player specific stats from csv
    d3.csv("data/player_stats/" + league.toLowerCase() + "/" + filename, function (error2, rows2) {
      var playerData = rows2;
      var wantedStats = [];
      var actualSeason = parseInt(season);

      //adjust for league year standards
      if(league == "NBA" || league == "NHL")
        actualSeason -= 1;

      //Get Stats from the Player's MVP Season
      for(var k = 0; k < playerData.length; k++){
        var season_Year = "";
        if(league == "NHL" || league == "NBA")
          season_year = playerData[k].Season.substring(0,4);
        else
          season_year = playerData[k].Year.substring(0,4);

        //gets player stats if available, specific to mvp's position and league and season
        if(season_year == actualSeason.toString()){
          var temp = [];
          if(league == "NBA"){
            wantedStats = [{Category: "Points", Player: playerData[k].PTS, League: 0, stats: temp},
                          {Category: "Threes", Player: playerData[k].Threes, League: 0, stats: temp},
                          {Category: "Rebounds", Player: playerData[k].TRB, League: 0, stats: temp},
                          {Category: "Assists", Player: playerData[k].AST, League: 0, stats: temp},
                          {Category: "Steals", Player: playerData[k].STL, League: 0, stats: temp},
                          {Category: "Blocks", Player: playerData[k].BLK, League: 0, stats: temp},
                          {Category: "eFG", Player: playerData[k].eFG_Percentage, League: 0, stats: temp}];
          } else if(league == "MLB"){
            if(position == "P"){
              wantedStats = [{Category: "Wins", Player: playerData[k].W, League: 0, stats: temp},
                            {Category: "ERA", Player: playerData[k].ERA, League: 0, stats: temp},
                            {Category: "Innings", Player: playerData[k].IP, League: 0, stats: temp},
                            {Category: "Complete Game", Player: playerData[k].CG, League: 0, stats: temp},
                            {Category: "Shutouts", Player: playerData[k].SHO, League: 0, stats: temp},
                            {Category: "Strikeouts", Player: playerData[k].SO, League: 0, stats: temp},
                            {Category: "WHIP", Player: playerData[k].WHIP, League: 0, stats: temp}];
            } else {
              wantedStats = [{Category: "Hits", Player: playerData[k].H, League: 0, stats: temp},
                            {Category: "Runs", Player: playerData[k].R, League: 0, stats: temp},
                            {Category: "HR", Player: playerData[k].HR, League: 0, stats: temp},
                            {Category: "SB", Player: playerData[k].SB, League: 0, stats: temp},
                            {Category: "RBI", Player: playerData[k].RBI, League: 0, stats: temp},
                            {Category: "BA", Player: playerData[k].BA, League: 0, stats: temp},
                            {Category: "Slugging", Player: playerData[k].SLG, League: 0, stats: temp}];
            }
          } else if(league == "NFL"){
            if(position == "QB"){
              wantedStats = [{Category: "Yd/G", Player: playerData[k].Y_G, League: 0, stats: temp},
                            {Category: "Rating", Player: playerData[k].Rate, League: 0, stats: temp},
                            {Category: "Comp%", Player: playerData[k].Cmp_Percentage, League: 0, stats: temp},
                            {Category: "TD", Player: playerData[k].TD, League: 0, stats: temp},
                            {Category: "Yd/A", Player: playerData[k].Y_A, League: 0, stats: temp}];
            } else {
              wantedStats = [{Category: "Rush Yd/G", Player: playerData[k].Rushing_Y_G, League: 0, stats: temp},
                            {Category: "Rush TD", Player: playerData[k].Rushing_TD, League: 0, stats: temp},
                            {Category: "Rush Y/A", Player: playerData[k].Rushing_Y_A, League: 0, stats: temp},
                            {Category: "Rec Yd/G", Player: playerData[k].Receiving_Y_G, League: 0, stats: temp},
                            {Category: "Rec TD", Player: playerData[k].Receiving_TD, League: 0, stats: temp}];
            }
          } else if(league == "NHL"){
            if (position == "G"){
              wantedStats = [{Category: "Wins", Player: playerData[k].W, League: 0, stats: temp},
                            {Category: "Save%", Player: playerData[k].SV_Percentage, League: 0, stats: temp},
                            {Category: "Avg GA", Player: playerData[k].GAA, League: 0, stats: temp},
                            {Category: "Shutouts", Player: playerData[k].SO, League: 0, stats: temp},
                            {Category: "Quality Start", Player: playerData[k].QS_Percentage, League: 0, stats: temp}];
            } else {
              wantedStats = [{Category: "Hits", Player: playerData[k].HIT, League: 0, stats: temp},
                            {Category: "Blocks", Player: playerData[k].BLK, League: 0, stats: temp},
                            {Category: "Points", Player: playerData[k].PTS, League: 0, stats: temp},
                            {Category: "Goals", Player: playerData[k].G, League: 0, stats: temp},
                            {Category: "Shooting%", Player: playerData[k].S_Percentage, League: 0, stats: temp},
                            {Category: "Plus Minus", Player: playerData[k].Plus_Minus, League: 0, stats: temp}];
            }
          } else {
            throw "Invalid League";
          }
          break;
        }
      }

      //Get league average Stats
      d3.csv("data/" + league.toLowerCase() + "_league_averages.csv", function (error3, rows3) {
        var averageData = rows3;
        for(var k = 0; k < averageData.length; k++){
          var season_year = "";
          if(league == "NHL" || league == "NBA")
            season_year = averageData[k].Season.substring(0,4);
          else
            season_year = averageData[k].Year.substring(0,4);
          //get stats for all of the league in a particular season specific to the leauge/position of the mvp
          if(season_year == actualSeason.toString()){
            if(league == "NBA"){
              wantedStats[0].League = averageData[k].PTS;
              wantedStats[1].League = averageData[k].Threes;
              wantedStats[2].League = averageData[k].TRB;
              wantedStats[3].League = averageData[k].AST;
              wantedStats[4].League = averageData[k].STL;
              wantedStats[5].League = averageData[k].BLK;
              wantedStats[6].League = averageData[k].eFG_Percentage;
            } else if(league == "MLB"){
              if(position == "P"){
                wantedStats[0].League = averageData[k].W;
                wantedStats[1].League = averageData[k].ERA;
                wantedStats[2].League = averageData[k].IP;
                wantedStats[3].League = averageData[k].CG;
                wantedStats[4].League = averageData[k].SHO;
                wantedStats[5].League = averageData[k].SO;
                wantedStats[6].League = averageData[k].WHIP;
              } else {
                wantedStats[0].League = averageData[k].H;
                wantedStats[1].League = averageData[k].R;
                wantedStats[2].League = averageData[k].HR;
                wantedStats[3].League = averageData[k].SB;
                wantedStats[4].League = averageData[k].RBI;
                wantedStats[5].League = averageData[k].BA;
                wantedStats[6].League = averageData[k].SLG;
              }
            } else if(league == "NFL"){
              if(position == "QB"){
                wantedStats[0].League = averageData[k].Y_G;
                wantedStats[1].League = averageData[k].Rate;
                wantedStats[2].League = averageData[k].Cmp_Percentage;
                wantedStats[3].League = averageData[k].TD;
                wantedStats[4].League = averageData[k].Y_A;
              } else {
                wantedStats[0].League = averageData[k].Rushing_Y_G;
                wantedStats[1].League = averageData[k].Rushing_TD;
                wantedStats[2].League = averageData[k].Rushing_Y_A;
                wantedStats[3].League = averageData[k].Receiving_Y_G;
                wantedStats[4].League = averageData[k].Receiving_TD;
              }
            } else if(league == "NHL"){
              if(position == "G"){
                wantedStats[0].League = averageData[k].W;
                wantedStats[1].League = averageData[k].SV_Percentage;
                wantedStats[2].League = averageData[k].GAA;
                wantedStats[3].League = averageData[k].SO;
                wantedStats[4].League = averageData[k].QS_Percentage;
              } else {
                wantedStats[0].League = averageData[k].HIT;
                wantedStats[1].League = averageData[k].BLK;
                wantedStats[2].League = averageData[k].PTS;
                wantedStats[3].League = averageData[k].G;
                wantedStats[4].League = averageData[k].S_Percentage;
                wantedStats[5].League = averageData[k].Plus_Minus;            
              }
            } else {
              throw "Invalid League";
            }
          }
        }
        mvp_avg_graph(mvpGraphWindow, firstName + " " + lastName, wantedStats);
      });
    });

    //neatly add all of the data/trophies in a bar graph
    mvpWindow.append("text")
      .text("")
      .attr("x", mvpWindowWidth/2)
      .attr("text-anchor", "middle")
      .attr("y", mvpWindowHeight*.2)
      .attr("font-size", "40px")
      .attr("id", "mvpWindowTitle");

    mvpWindow.append("text")
      .text("")
      .attr("x", mvpWindowWidth/4)
      .attr("text-anchor", "middle")
      .attr("y", mvpWindowHeight*.5)
      .attr("font-size", "25px")
      .attr("id", "seasonMVP");

    mvpWindow.append("text")
      .text("")
      .attr("x", 3*mvpWindowWidth/4)
      .attr("text-anchor", "middle")
      .attr("y", mvpWindowHeight*.5)
      .attr("font-size", "25px")
      .attr("id", "careerAwards");

    mvpWindow.select("#mvpWindowTitle")
                .text(name);
    mvpWindow.select("#seasonMVP")
                .text(season + " " + league + " MVP");
    mvpWindow.select("#careerAwards")
                .text("Career Awards");
    addTrophyGraphic(mvpTrophies, firstName + " " + lastName, league);
  });
  
  //sets up scatterplot svg
  var margin = {top: 20, right: 100, bottom: 100, left: 150},
    width = 1260 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

  var x = d3.scale.linear().range([0, width]),
    y = d3.scale.linear().range([height, 0]),
    color = d3.scale.category10();

  var xAxis = d3.svg.axis().scale(x).orient("bottom"),
    yAxis = d3.svg.axis().scale(y).orient("left");

  var scatterplot = d3.select(".scatterplot").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  // Define the div for the tooltip
  var div = d3.select(".scatterplot").append("div")
    .attr("class", "scatterplot-tooltip")
    .style("opacity", 0);

  //
  x.domain(d3.extent(rows, function(d) { return Number(d.Age); })).nice();
  y.domain(d3.extent(rows, function(d) { return Number(d.Salary); })).nice();

  scatterplot.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + height + ")")
    .call(xAxis)
    .append("text")
      .attr("class", "label")
      .attr("x", width)
      .attr("y", -6)
      .style("text-anchor", "end")
      .text("Age (yrs)");

  scatterplot.append("g")
    .attr("class", "y axis")
    .call(yAxis)
    .append("text")
      .attr("class", "label")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Salary ($)")

  format = d3.format("0,000");

  //Scatterplot dots with data
  var dots = scatterplot.selectAll(".dot").data(mvp_data, function(d) { return d.ID; });

  //add dots to graph
  dots.enter().append("circle")
    .attr("class", function(d) { return "dot " + d.Team + " " + d.College.split(' ').join('_') })
    .attr("r", 3.5)
    .attr("cx", function(d) { return x(Number(d.Age)); })
    .attr("cy", function(d) { return y(Number(d.Salary)); })
    .style("fill", function(d) { return color(d.League); })
    .on("mouseover", function(d) {
      d.Player.split(' ').join('_')
      tip.transition().duration(200).style("opacity", .9);
      tip.html("<img src='resources/images/player-photos/" + d.Player.toLowerCase().split(' ').join('_') + ".jpg'" +
          "style='float: left;',  height=160, width=130> <h4>" +
          d.Player + "</h4>" + "<br/>" +
          "<strong><u>Hometown:</u></strong>  " + d.Hometown + "<br/>" +
          "<strong><u>Team:</u></strong>  " + d.Team + "<br/>" +
          "<strong><u>Position:</u></strong>  " + d.Position + "<br/>" +
          "<strong><u>Age:</u></strong>  " + d.Age + "<br/>" +
          "<strong><u>Height:</u></strong>  " + d.Height + "<br/>" +
          "<strong><u>Weight:</u></strong>  " + d.Weight + " lbs<br/>" +
          "<strong><u>College:</u></strong>  " + d.College + "<br/>" +
          "<strong><u>Salary:</u></strong>  $" + d.Salary + "<br/>")
        .style("left", (d3.event.pageX) + "px")
        .style("top", (d3.event.pageY - 28) + "px");
    })
    .on("mouseout", function(d) {
      tip.transition().duration(500).style("opacity", 0);
    });

  //adds legend
  var legend = scatterplot.selectAll(".legend")
    .data(color.domain())
    .enter().append("g")
    .attr("class", "legend")
    .attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });

  legend.append("rect")
    .attr("x", width - 18)
    .attr("width", 18)
    .attr("height", 18)
    .style("fill", color);

  legend.append("text")
    .attr("x", width - 24)
    .attr("y", 9)
    .attr("dy", ".35em")
    .style("text-anchor", "end")
    .text(function(d) { return d; });

  //dynamically create drop down lists
  var collegeDropDown = d3.select(".college-dropdown").append("select").attr("name", "college-list");
  var teamDropDown = d3.select(".team-dropdown").append("select").attr("name", "team-list");
  var leagueDropDown = d3.select(".sport-dropdown").append("select").attr("name", "sport-list");

  var colleges = remove_duplicates("College");
  var teams = remove_duplicates("Team");
  var leagues = remove_duplicates("League");

  //Creates a player where all of the fields are -- All --
  var allobject = {
    Age: "-- All --",
    College: "-- All --",
    Height: "-- All --",
    Hometown: "-- All --",
    Latitude: "-- All --",
    League: "-- All --",
    Longitude: "-- All --",
    Player: "-- All --",
    Position: "-- All --",
    Salary: "-- All --",
    Season: "-- All --",
    Subleague: "-- All --",
    Team: "-- All --",
    Weight: "-- All --"};
  
  //adds the all object to the beginning of all of the dropdowns
  colleges.unshift(allobject);
  teams.unshift(allobject);
  leagues.unshift(allobject);
  
  //creates the options
  var collegeOptions = collegeDropDown.selectAll("option").data(colleges).enter().append("option");
  var teamOptions = teamDropDown.selectAll("option").data(teams).enter().append("option");
  var leagueOptions = leagueDropDown.selectAll("option").data(leagues).enter().append("option");

  //creates the attributes for the options 
  collegeOptions.text(function(d) { return d.College; })
    .attr("value", function(d) { return d.College;})
    .attr("id", function(d) { return d.College.split(' ').join('_');});
  teamOptions.text(function(d) { return d.Team; })
    .attr("value", function(d) { return d.Team; })
    .attr("id", function(d) { return d.Team.split(' ').join('_'); });
  leagueOptions.text(function(d) { return d.League; })
    .attr("value", function(d) { return d.League; })
    .attr("id", function(d) { return d.League.split(' ').join('_'); });

  //adds the filter handling for changing the options
  collegeDropDown.on("change", filterHandlerCollege);
  teamDropDown.on("change", filterHandlerTeam);
  leagueDropDown.on("change", filterHandlerLeague);

  //calls the filtering function with the correct argument
  function filterHandlerCollege() { filterDots("College"); }
  function filterHandlerTeam() { filterDots("Team"); }
  function filterHandlerLeague() { filterDots("League"); }

  //filters the scatterplot
  // typeChanged helps reset the dropdown option for later
  // resetFlag allows for the resetButton to work, ignoring the dropdowns
  function filterDots(typeChanged, resetFlag) {
    var college = collegeDropDown.node().value;
    var team = teamDropDown.node().value;
    var league = leagueDropDown.node().value;
    if (resetFlag) {
      college = "-- All --";
      team = "-- All --";
      league = "-- All --";
    }

    //gets newData from mvp_data
    var newData = mvp_data.filter(function(d) {
      return (d.College == college || college == "-- All --") &&
        (d.Team == team || team == "-- All --") &&
        (d.League == league || league == "-- All --");
    });

    //adds dots to graph
    dots = scatterplot.selectAll(".dot").data(newData, function(d) { return d.ID; });
    dots.enter();
    dots.attr("display", "inline");
    dots.exit().attr("display", "none");

    //updates the dropdowns with the new filtered data
    var newColleges = remove_duplicates("College", newData);
    var newTeams = remove_duplicates("Team", newData);
    var newLeagues = remove_duplicates("League", newData);

    newColleges.unshift(allobject);
    newTeams.unshift(allobject);
    newLeagues.unshift(allobject);

    collegeOptions = collegeDropDown.selectAll("option").data(newColleges);
    collegeOptions.enter().append("option");
    teamOptions = teamDropDown.selectAll("option").data(newTeams);
    teamOptions.enter().append("option");
    leagueOptions = leagueDropDown.selectAll("option").data(newLeagues);
    leagueOptions.enter().append("option");

    collegeOptions.text(function(d) { return d.College; })
      .attr("value", function(d) { return d.College; })
      .attr("id", function(d) { return d.College.split(' ').join('_'); })
      .attr("class", function(d) { return d.College.split(' ').join('_'); });
    teamOptions.text(function(d) { return d.Team; })
      .attr("value", function(d) { return d.Team; })
      .attr("id", function(d) { return d.Team.split(' ').join('_'); })
      .attr("class", function(d) { return d.Team.split(' ').join('_'); });
    leagueOptions.text(function(d) { return d.League; })
      .attr("value", function(d) { return d.League; })
      .attr("id", function(d) { return d.League.split(' ').join('_'); })
      .attr("class", function(d) { return d.League.split(' ').join('_');});

    collegeOptions.exit().remove();
    teamOptions.exit().remove();
    leagueOptions.exit().remove();

    //changes the selected option
    switch (typeChanged) {
      case "College":
        d3.select('#' + college.split(' ').join('_')).property("selected", "selected");
        break;
      case "Team":
        d3.select('#' + team.split(' ').join('_')).property("selected", "selected");
        break;
      case "League":
        d3.select('#' + league.split(' ').join('_')).property("selected", "selected");
        break;
      default:
        console.log(typeChanged);
    }
  }

  resetbutton = d3.select("#reset-button")
  resetbutton.on("click", function() {
    filterDots(null, 1);
  });

});
</script>


<script>
var mvp_data;

//adds the interactive histogram to the bottom
d3.csv("data/mvp_list.csv", function (error, rows) {
  
  mvp_data = rows;

  //consistent color scale with the scatterplot
  var color = d3.scale.category10();
  //ensures consistent order of coloring
  var leagues = ["NBA", "NFL", "NHL", "MLB"];

  //Specs for spacing in the graph
  var margin = {top: 40, right: 50, bottom: 50, left: 50},
    width = 1260 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom,
    barSpacing = .5;

  //handles units of the x axis
  var categoryToUnits = {Age: "(yr)", Height: "(in)", Weight: "(lb)", Salary: "($100,000)", }

  //filters data by league
  var MLBRows = mvp_data.filter(function (row) {return row["League"] == 'MLB';}),
    NFLRows = mvp_data.filter(function (row) {return row["League"] == 'NFL';}),
    NBARows = mvp_data.filter(function (row) {return row["League"] == 'NBA';}),
    NHLRows = mvp_data.filter(function (row) {return row["League"] == 'NHL';});

  //adds histogram svgs
  var histogram = d3.select("#overall-stats").append("svg")
    .attr("id","histogram")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  //variables used across all functions, not sure how javascript scopes work but apparently
  // this line is not necessary..
  var yScale, xScale, labelScale, rect, layer, yAxis, xAxis, layers, yGroupMax, yStackMax, numBins, category;

  //sets beginning graph specs
  var currentMode = "stacked";
  var category = "Height";
  initCategory();

  //sets all of the buttons' click events
  d3.selectAll(".histogramButton").on("click",function() {
    switch (this.value) {
      case "grouped": 
        currentMode = this.value;
        transitionGrouped(); 
        break;
      case "stacked": 
        currentMode = this.value;
        transitionStacked(); 
        break;
      default:
        category = this.value;
        transitionCategory();
    }
  });

  //change to grouped graph
  function transitionGrouped() {
    //change y axis
    yScale.domain([0, yGroupMax]);
    d3.selectAll(".yAxis").remove();
    histogram.append("g")
      .attr("class", "yAxis")
      .attr("transform", "translate(" + margin.left + ",0)")
      .call(yAxis)
      .append("text")
        .attr("class", "label")
        .attr("transform", "rotate(-90)")
        .attr("y", 6)
        .attr("dy", ".71em")
        .style("text-anchor", "end")
        .text("Frequency");

    //change rect's
    rect = layer.selectAll("rect");
    rect.transition()
      .duration(500)
        .delay(function(d, i) { return i * 10; })
        .attr("x", function(d, i, j) { return xScale(d.x) + xScale.rangeBand() / 4 * j; })
        .attr("width", xScale.rangeBand() / 4)
        .transition()
          .attr("y", function(d) { return yScale(d.y); })
          .attr("height", function(d) { return height - yScale(d.y); });
  }

  //change to stacked graph
  function transitionStacked() {
    //change y axis
    yScale.domain([0, yStackMax]);
    d3.selectAll(".yAxis").remove();
    histogram.append("g")
      .attr("class", "yAxis")
      .attr("transform", "translate(" + margin.left + ",0)")
      .call(yAxis)
        .append("text")
        .attr("class", "label")
        .attr("transform", "rotate(-90)")
        .attr("y", 6)
        .attr("dy", ".71em")
        .style("text-anchor", "end")
        .text("Frequency");;

    //update rectangles
    rect = layer.selectAll("rect");
    rect.transition()
      .duration(500)
      .delay(function(d, i) { return i * 10; })
      .attr("y", function(d) { return yScale(d.y0 + d.y); })
      .attr("height", function(d) { return yScale(d.y0) - yScale(d.y0 + d.y); })
      .transition()
        .attr("x", function(d) { return xScale(d.x); })
        .attr("width", xScale.rangeBand());
  }

  //get the data for whichever category is needed
  function getData() {
    //In case we wanted different bins, but we left this out
    var categoryToBins= {Age: 10, Height: 10, Weight: 10, Salary: 10};

    //changed data for salary to make graph more readable
    var dataMod = (category==="Salary")?1/100000:1;

    //helps to get the bin labels by subtracting the one to the right by this value below
    var endSubtractor = {Age: 1, Height: .1, Weight: 1, Salary: 100000};

    numBins = categoryToBins[category];

    //gets max and min of data
    var maxMin = d3.extent(mvp_data, function (row) {return Number(row[category]);}),
      range = maxMin[1]-maxMin[0];

    //initializes bins for each league
    var MLBBins=[], NFLBins=[], NBABins=[], NHLBins=[];
    for (var i = numBins; i >= 0; i--) {
      //gets begining, end, and labe for each bin
      var begin = i*(range/numBins)+maxMin[0],
        end = (i+1)*(range/numBins)+maxMin[0]-endSubtractor[category];
      var begin = Math.floor(10*begin*dataMod)/10,
        end = Math.floor(10*end*dataMod)/10;
      var label = String(begin) + "-" + String(end);
      //Initialize all bins with this format, adding id
      MLBBins[i]={x: end, label: label, y: 0, id: i};
        NFLBins[i]={x: end, label: label, y: 0, id: numBins + i};
        NBABins[i]={x: end, label: label, y: 0, id: numBins*2 + i};
        NHLBins[i]={x: end, label: label, y: 0, id: numBins*3 + i};
    }

    //adds data to bins for each row in each league
    MLBRows.forEach(function (row) {
      var ind = Math.floor((row[category]-maxMin[0])/(range/numBins));
      MLBBins[ind].y++;});
    NFLRows.forEach(function (row) {
      var ind = Math.floor((row[category]-maxMin[0])/(range/numBins));
      NFLBins[ind].y++;});
    NBARows.forEach(function (row) {
      var ind = Math.floor((row[category]-maxMin[0])/(range/numBins));
      NBABins[ind].y++;});
    NHLRows.forEach(function (row) {
      var ind = Math.floor((row[category]-maxMin[0])/(range/numBins));
      NHLBins[ind].y++;});

    //adds league bins in correct order
    var allBins = [NBABins, NFLBins, NHLBins, MLBBins];

    //Adapted from mbostock, at http://bl.ocks.org/mbostock/3943967 (the whole idea for transitioning between grouped/stacked)
    var stack = d3.layout.stack();
    layers = stack(d3.range(leagues.length).map(function(d, i) { return allBins[i]; })),

    //get max for each of the graphs for the yScale
    yGroupMax = d3.max(layers, function(layer) { return d3.max(layer, function(d) { return d.y; }); }),
    yStackMax = d3.max(layers, function(layer) { return d3.max(layer, function(d) { return d.y0 + d.y; }); });

    //create appropriate scales
    xScale = d3.scale.ordinal()
        .domain(MLBBins.map(function(d){return d.x;}))
        .rangeRoundBands([margin.left, width], barSpacing);

    yScale = d3.scale.linear()
        .domain([0, yStackMax])
        .range([height, 0]);

    labelScale = d3.scale.ordinal()
        .domain(MLBBins.map(function(d){return d.label;}))
        .rangeRoundBands([margin.left, width], barSpacing);

    //create axes to be plotted later
    xAxis = d3.svg.axis()
        .scale(labelScale)
        .tickSize(0)
        .tickPadding(6)
        .orient("bottom");

    yAxis = d3.svg.axis()
      .scale(yScale)
      .tickSize(1)
      .tickPadding(6)
      .orient("left");
  }

  //first time plotting everything
  function initCategory() {
    getData();

    //plot layers in groups (code adapted from mbostock)
    layer = histogram.selectAll(".layer").data(layers).enter()
      .append("g")
      .attr("class", "layer")
      .style("fill", function(d, i) { return color(leagues[i]); });

    //plot rectangles
    rect = layer.selectAll("rect").data(function(d) { return d; }).enter()
      .append("rect")
        .attr("x", function(d) { return xScale(d.x); })
        .attr("y", height)
        .attr("width", xScale.rangeBand())
        .attr("height", 0);

    // custom transition to plot bars down and then up to their correct position
    rect.transition().duration(1500)
      .attr("y", function(d) { return yScale(d.y0 + d.y); })
      .attr("height", function(d) { return yScale(d.y0) - yScale(d.y0 + d.y); });

    //add axes
    histogram.append("g").attr("class", "xAxis")
        .attr("transform", "translate(0," + height + ")")
        .call(xAxis)
        .append("text")
          .attr("class", "label")
          .attr("x", width/2)
          .attr("y", 28)
          .attr("dy", ".71em")
          .style("text-anchor", "center")
          .style("font-size", "12pt")
          .text(category + " " + categoryToUnits[category]);
    histogram.append("g").attr("class", "yAxis")
        .attr("transform", "translate(" + margin.left + ",0)")
        .call(yAxis)
        .append("text")
          .attr("class", "label")
          .attr("transform", "rotate(-90)")
          .attr("y", 6)
          .attr("dy", ".71em")
          .style("text-anchor", "end")
          .text("Frequency");
        
    //add legend  
    var legend = d3.select("#histogram").selectAll(".legend")
      .data(color.domain())
      .enter()
      .append("g")
        .attr("class", "legend")
        .attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });

    legend.append("rect")
        .attr("x", width - 18)
        .attr("width", 18)
        .attr("height", 18)
        .style("fill", color);

    legend.append("text")
        .attr("x", width - 24)
        .attr("y", 9)
        .attr("dy", ".35em")
        .style("text-anchor", "end")
        .text(function(d) { return d; });
  }

  //when category is changed, this is called to update bars/axes
  function transitionCategory() {
    getData();

    layer = histogram.selectAll(".layer")
      .data(layers)
      .style("fill", function(d, i) { return color(leagues[i]); });
    layer.exit().remove();

    rect = layer.selectAll("rect")
      .data(function(d) { return d; })
      .transition().duration(500)
        .attr("x", function(d) { return xScale(d.x); })
        .attr("y", height-20)
        .attr("width", xScale.rangeBand()/4)
        .attr("height",20);

    //ensures transition is correct (much of this is hardcoded, 
    // as to avoid scoping errors that were found. probably 
    // could be optimized but it works and scoping scares me)
    if (currentMode==="grouped") {
      yScale.domain([0, yGroupMax]);
      d3.selectAll(".yAxis").remove();
      histogram.append("g")
        .attr("class", "yAxis")
        .attr("transform", "translate(" + margin.left + ",0)")
        .call(yAxis)
        .append("text")
          .attr("class", "label")
          .attr("transform", "rotate(-90)")
          .attr("y", 6)
          .attr("dy", ".71em")
          .style("text-anchor", "end")
          .text("Frequency");;
      rect.transition()
        .duration(500)
        .attr("x", function(d, i, j) { return xScale(d.x) + xScale.rangeBand() / 4 * j; })
        .attr("width", xScale.rangeBand() / 4)
        .attr("y", function(d) { return yScale(d.y); })
        .attr("height", function(d) { return height - yScale(d.y); });
    } else {
      yScale.domain([0, yStackMax]);
      d3.selectAll(".yAxis").remove();
      histogram.append("g")
        .attr("class", "yAxis")
        .attr("transform", "translate(" + margin.left + ",0)")
        .call(yAxis)
        .append("text")
          .attr("class", "label")
          .attr("transform", "rotate(-90)")
          .attr("y", 6)
          .attr("dy", ".71em")
          .style("text-anchor", "end")
          .text("Frequency");;

      rect.transition().duration(500)
        .attr("x", function(d) { return xScale(d.x); })
        .attr("width", xScale.rangeBand())
        .attr("y", function(d) { return yScale(d.y0 + d.y); })
        .attr("height", function(d) { return yScale(d.y0) - yScale(d.y0 + d.y); });
    }

    //Reset Axes
    d3.selectAll(".xAxis").remove();
    d3.selectAll(".yAxis").remove();
    histogram.append("g").attr("class", "xAxis")
        .attr("transform", "translate(0," + height + ")")
        .call(xAxis)
        .append("text")
          .attr("class", "label")
          .attr("x", width/2)
          .attr("y", 28)
          .attr("dy", ".71em")
          .style("text-anchor", "center")
          .style("font-size", "12pt")
          .text(category + " " + categoryToUnits[category]);
    histogram.append("g").attr("class", "yAxis")
        .attr("transform", "translate(" + margin.left + ",0)")
        .call(yAxis)
        .append("text")
          .attr("class", "label")
          .attr("transform", "rotate(-90)")
          .attr("y", 6)
          .attr("dy", ".71em")
          .style("text-anchor", "end")
          .text("Frequency");
  }
  
});

//function to make the graph for the specific mvp
// givenSVG is the svg to append to
// 
function mvp_avg_graph(givenSVG, name, data){
  var margin = {top: 40, right: 20, bottom: 30, left: 40},
    width = 600 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

  var x0 = d3.scale.ordinal()
      .rangeRoundBands([0, width], .1);

  var x1 = d3.scale.ordinal();

  var y = d3.scale.linear()
      .range([height, 0]);

  var color = d3.scale.ordinal()
      .range(["#ff8c00", "#8a89a6"]);

  var xAxis = d3.svg.axis()
      .scale(x0)
      .orient("bottom");

  var yAxis = d3.svg.axis()
      .scale(y)
      .orient("left")
      .tickFormat("");

  var categories = ["Player", "League"];
  data.forEach(function(d) {
    d.stats = categories.map(function(name) { return {name: name, value: d[name]}; });
  });

  var maxStat = 0;
  for(var k = 0; k < data.length; k++){
    if(Number(data[k].Player) > Number(maxStat)){
      maxStat = data[k].Player;
    }
  }

  x0.domain(data.map(function(d) { return d.Category; }));
  x1.domain(categories).rangeRoundBands([0, x0.rangeBand()]);
  y.domain([0, maxStat]); //d3.max(data, function(d) { return d3.max(d.stats, function(d) { return d.value; }); })

  givenSVG.append("g")
      .attr("id", "xaxis")
      .attr("class", "x axis")
      .attr("transform", "translate(5," + height + ")")
      .attr("font-size", "0px")
      .transition().duration(800)
      .attr("font-size", "15px")
      .call(xAxis);

  givenSVG.append("g")
      .attr("class", "y axis")
      .call(yAxis)
      .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", "-10em")
      .transition().duration(800)
      .attr("font-size", "11px")
      .attr("dy", ".45em")
      .style("text-anchor", "end")
      .text("Per Game Values");


  var cats = givenSVG.selectAll(".cats")
      .data(data)
      .enter().append("g")
      .attr("class", "cats")
      .attr("transform", function(d) { return "translate(" + x0(d.Category) + ",0)"; });

  cats.selectAll("rect")
      .data(function(d) { return d.stats; })
      .enter().append("rect")
      .attr("id", "bars")
      .attr("stroke-width", 0)
      .attr("width", x1.rangeBand())
      .attr("x", function(d) { return x1(d.name)+5; })
      .attr("y", function(d) { return height; })
      .attr("height", function(d) { return 0; })
      .transition().duration(600)
      .attr("height", function(d) { return height - y(d.value); })
      .attr("y", function(d) { return y(d.value); })
      .style("fill", function(d) { return color(d.name); });

  // d3.select('#bars')
  //   .on('click', labelClick());

  cats.selectAll(".bartext")
      .data(function(d) { return d.stats; })
      .enter()
      .append("text")
      .attr("class", "bartext")
      .attr("text-anchor", "middle")
      .attr("fill", "black")
      .attr("font-size", "0px")
      .transition().duration(800)
      .attr("font-size", "12px")
      .attr("x", function(d) {
          return x1(d.name)+x1.rangeBand()/2+5;
      })
      .attr("y", function(d) {
          return y(d.value) - 2;
      })
      .text(function(d){
           return parseFloat(d.value).toFixed(2);
      });

  var legend = givenSVG.selectAll(".legend")
      .data(categories.slice().reverse())
      .enter().append("g")
      .attr("class", "legend")
      .attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });

  legend.append("rect")
      .attr("x", width - 18)
      .attr("width", 18)
      .attr("height", 18)
      .style("fill", color);

  legend.append("text")
      .attr("id", "legendtext")
      .attr("x", width - 24)
      .attr("y", 10)
      .attr("dy", ".35em")
      .attr("font-size", "0px")
      .transition().duration(800)
      .attr("font-size", "15px")
      .style("text-anchor", "end")
      .text(function(d) { return d; });

}
function addTrophyGraphic(givenSVG, name, league){
  givenSVG.selectAll("*").remove();
  var indexOfPlayer = 0;
  for(var i = 0; i < trophies.length; i++){
    if(trophies[i].Player == name){
      indexOfPlayer = i;
      break;
    }
  }
  yearData = [];
  if(league == "NBA"){
    givenSVG.append("text")
          .attr("x", 0)
          .attr("y", 5)
          .attr("font-size", "20px")
          .style("opacity", "0")
          .transition().delay(500)
          .style("opacity", "1")
          .text("MVPs");
    for(var i = 0; i < trophies[indexOfPlayer].MVP.length; i++){
      yearData.push(trophies[indexOfPlayer].MVP[i]);
      givenSVG.append("image")
          .attr("year", trophies[indexOfPlayer].MVP[i])
          .attr("x", 80*i)
          .attr("y", 20)
          .attr("width", 70)
          .attr("height", 70)
          .style("opacity", "0")
          .attr("xlink:href", "resources/images/trophy-photos/nba_mvp.png")
          .transition().delay(1500 + i*500)
          .style("opacity", "1");

    }

    givenSVG.append("text")
          .attr("x", 0)
          .attr("y", 120)
          .attr("font-size", "20px")
          .style("opacity", "0")
          .transition().delay(500)
          .style("opacity", "1")
          .text("Championships");
    for(var i = 0; i < trophies[indexOfPlayer].Championship.length; i++){
      yearData.push(trophies[indexOfPlayer].Championship[i]);
      givenSVG.append("image")
          .attr("year", trophies[indexOfPlayer].Championship[i])
          .attr("x", 80*i)
          .attr("y", 135)
          .attr("width", 70)
          .attr("height", 70)
          .style("opacity", "0")
          .attr("xlink:href", "resources/images/trophy-photos/nba_championship.png")
          .transition().delay(1500 + i*500)
          .style("opacity", "1");
    }

    givenSVG.append("text")
          .attr("x", 0)
          .attr("y", 228)
          .attr("font-size", "20px")
          .style("opacity", "0")
          .transition().delay(500)
          .style("opacity", "1")
          .text("All-NBA");
    for(var i = 0; i < trophies[indexOfPlayer].All_NBA.length; i++){
      yearData.push(trophies[indexOfPlayer].All_NBA[i]);
      givenSVG.append("image")
          .attr("year", trophies[indexOfPlayer].All_NBA[i])
          .attr("x", 80*i)
          .attr("y", 242)
          .attr("width", 70)
          .attr("height", 70)
          .style("opacity", "0")
          .attr("xlink:href", "resources/images/trophy-photos/nba_allstar.png")
          .transition().delay(1500 + i*500)
          .style("opacity", "1");
    }

    givenSVG.append("text")
          .attr("x", 0)
          .attr("y", 337)
          .attr("font-size", "20px")
          .style("opacity", "0")
          .transition().delay(500)
          .style("opacity", "1")
          .text("All-Defense");
    for(var i = 0; i < trophies[indexOfPlayer].All_Defense.length; i++){
      yearData.push(trophies[indexOfPlayer].All_Defense[i]);
      givenSVG.append("image")
          .attr("year", trophies[indexOfPlayer].All_Defense[i])
          .attr("x", 80*i)
          .attr("y", 355)
          .attr("width", 70)
          .attr("height", 70)
          .style("opacity", "0")
          .attr("xlink:href", "resources/images/trophy-photos/nba_dpoy.png")
          .transition().delay(1500 + i*500)
          .style("opacity", "1");
    }
  }
  if(league == "MLB"){
    givenSVG.append("text")
          .attr("x", 0)
          .attr("y", 5)
          .attr("font-size", "20px")
          .style("opacity", "0")
          .transition().delay(500)
          .style("opacity", "1")
          .text("MVPs");
    for(var i = 0; i < trophies[indexOfPlayer].MVP.length; i++){
      yearData.push(trophies[indexOfPlayer].MVP[i]);
      givenSVG.append("image")
          .attr("year", trophies[indexOfPlayer].MVP[i])
          .attr("x", 80*i)
          .attr("y", 20)
          .attr("width", 70)
          .attr("height", 70)
          .style("opacity", "0")
          .attr("xlink:href", "resources/images/trophy-photos/mlb_mvp.png")
          .transition().delay(1500 + i*500)
          .style("opacity", "1");
    }

    givenSVG.append("text")
          .attr("x", 0)
          .attr("y", 120)
          .attr("font-size", "20px")
          .style("opacity", "0")
          .transition().delay(500)
          .style("opacity", "1")
          .text("Championships");
    for(var i = 0; i < trophies[indexOfPlayer].Championship.length; i++){
      yearData.push(trophies[indexOfPlayer].Championship[i]);
      givenSVG.append("image")
          .attr("year", trophies[indexOfPlayer].Championship[i])
          .attr("x", 80*i)
          .attr("y", 135)
          .attr("width", 70)
          .attr("height", 70)
          .style("opacity", "0")
          .attr("xlink:href", "resources/images/trophy-photos/mlb_championship.png")
          .transition().delay(1500 + i*500)
          .style("opacity", "1");
    }

    givenSVG.append("text")
          .attr("x", 0)
          .attr("y", 228)
          .attr("font-size", "20px")
          .style("opacity", "0")
          .transition().delay(500)
          .style("opacity", "1")
          .text("Silver Slugger");
    for(var i = 0; i < trophies[indexOfPlayer].Silver_Slugger.length; i++){
      yearData.push(trophies[indexOfPlayer].Silver_Slugger[i]);
      givenSVG.append("image")
          .attr("year", trophies[indexOfPlayer].Silver_Slugger[i])
          .attr("x", 80*i)
          .attr("y", 242)
          .attr("width", 70)
          .attr("height", 70)
          .style("opacity", "0")
          .attr("xlink:href", "resources/images/trophy-photos/mlb_silverslugger.png")
          .transition().delay(1500 + i*500)
          .style("opacity", "1");
    }

    givenSVG.append("text")
          .attr("x", 0)
          .attr("y", 337)
          .attr("font-size", "20px")
          .style("opacity", "0")
          .transition().delay(500)
          .style("opacity", "1")
          .text("Golden Glove");
    for(var i = 0; i < trophies[indexOfPlayer].Golden_Glove.length; i++){
      yearData.push(trophies[indexOfPlayer].Golden_Glove[i]);
      givenSVG.append("image")
          .attr("year", trophies[indexOfPlayer].Golden_Glove[i])
          .attr("x", 80*i)
          .attr("y", 355)
          .attr("width", 70)
          .attr("height", 70)
          .style("opacity", "0")
          .attr("xlink:href", "resources/images/trophy-photos/mlb_goldenglove.png")
          .transition().delay(1500 + i*500)
          .style("opacity", "1");
    }
  }
  if(league == "NHL"){
    givenSVG.append("text")
          .attr("x", 0)
          .attr("y", 5)
          .attr("font-size", "20px")
          .style("opacity", "0")
          .transition().delay(500)
          .style("opacity", "1")
          .text("MVPs");
    for(var i = 0; i < trophies[indexOfPlayer].MVP.length; i++){
      yearData.push(trophies[indexOfPlayer].MVP[i]);
      givenSVG.append("image")
          .attr("year", trophies[indexOfPlayer].MVP[i])
          .attr("x", 80*i)
          .attr("y", 20)
          .attr("width", 70)
          .attr("height", 70)
          .style("opacity", "0")
          .attr("xlink:href", "resources/images/trophy-photos/nhl_mvp.png")
          .transition().delay(1500 + i*500)
          .style("opacity", "1");
    }

    givenSVG.append("text")
          .attr("x", 0)
          .attr("y", 120)
          .attr("font-size", "20px")
          .style("opacity", "0")
          .transition().delay(500)
          .style("opacity", "1")
          .text("Championships");
    for(var i = 0; i < trophies[indexOfPlayer].Championship.length; i++){
      yearData.push(trophies[indexOfPlayer].Championship[i]);
      givenSVG.append("image")
          .attr("year", trophies[indexOfPlayer].Championship[i])
          .attr("x", 80*i)
          .attr("y", 135)
          .attr("width", 70)
          .attr("height", 70)
          .style("opacity", "0")
          .attr("xlink:href", "resources/images/trophy-photos/nhl_championship.png")
          .transition().delay(1500 + i*500)
          .style("opacity", "1");
    }

    givenSVG.append("text")
          .attr("x", 0)
          .attr("y", 228)
          .attr("font-size", "20px")
          .style("opacity", "0")
          .transition().delay(500)
          .style("opacity", "1")
          .text("All Stars");
    for(var i = 0; i < trophies[indexOfPlayer].All_Star.length; i++){
      yearData.push(trophies[indexOfPlayer].All_Star[i]);
      givenSVG.append("image")
          .attr("year", trophies[indexOfPlayer].All_Star[i])
          .attr("x", 80*i)
          .attr("y", 242)
          .attr("width", 70)
          .attr("height", 70)
          .style("opacity", "0")
          .attr("xlink:href", "resources/images/trophy-photos/nhl_allstar.png")
          .transition().delay(1500 + i*500)
          .style("opacity", "1");
    }

    givenSVG.append("text")
          .attr("x", 0)
          .attr("y", 337)
          .attr("font-size", "20px")
          .style("opacity", "0")
          .transition().delay(500)
          .style("opacity", "1")
          .text("Conn Smythe (Defensive Player of Year)");
    for(var i = 0; i < trophies[indexOfPlayer].Conn_Smythe.length; i++){
      yearData.push(trophies[indexOfPlayer].Conn_Smythe[i]);
      givenSVG.append("image")
          .attr("year", trophies[indexOfPlayer].Conn_Smythe[i])
          .attr("x", 80*i)
          .attr("y", 355)
          .attr("width", 70)
          .attr("height", 70)
          .style("opacity", "0")
          .attr("xlink:href", "resources/images/trophy-photos/nhl_connsmythe.png")
          .transition().delay(1500 + i*500)
          .style("opacity", "1");
    }
  }
  if(league == "NFL"){
    givenSVG.append("text")
          .attr("x", 0)
          .attr("y", 5)
          .attr("font-size", "20px")
          .style("opacity", "0")
          .transition().delay(500)
          .style("opacity", "1")
          .text("MVPs");
    for(var i = 0; i < trophies[indexOfPlayer].MVP.length; i++){
      yearData.push(trophies[indexOfPlayer].MVP[i]);
      givenSVG.append("image")
          .attr("year", trophies[indexOfPlayer].MVP[i])
          .attr("x", 80*i)
          .attr("y", 20)
          .attr("width", 70)
          .attr("height", 70)
          .style("opacity", "0")
          .attr("xlink:href", "resources/images/trophy-photos/nfl_mvp.png")
          .transition().delay(1500 + i*500)
          .style("opacity", "1");
    }

    givenSVG.append("text")
          .attr("x", 0)
          .attr("y", 120)
          .attr("font-size", "20px")
          .style("opacity", "0")
          .transition().delay(500)
          .style("opacity", "1")
          .text("Championships");
    for(var i = 0; i < trophies[indexOfPlayer].Championship.length; i++){
      yearData.push(trophies[indexOfPlayer].Championship[i]);
      givenSVG.append("image")
          .attr("year", trophies[indexOfPlayer].Championship[i])
          .attr("x", 80*i)
          .attr("y", 135)
          .attr("width", 70)
          .attr("height", 70)
          .style("opacity", "0")
          .attr("xlink:href", "resources/images/trophy-photos/nfl_championship.png")
          .transition().delay(1500 + i*500)
          .style("opacity", "1");
    }

    givenSVG.append("text")
          .attr("x", 0)
          .attr("y", 228)
          .attr("font-size", "20px")
          .style("opacity", "0")
          .transition().delay(500)
          .style("opacity", "1")
          .text("Pro Bowls");
    for(var i = 0; i < trophies[indexOfPlayer].All_Star.length; i++){
      yearData.push(trophies[indexOfPlayer].All_Star[i]);
      givenSVG.append("image")
          .attr("year", trophies[indexOfPlayer].All_Star[i])
          .attr("x", 80*i)
          .attr("y", 242)
          .attr("width", 70)
          .attr("height", 70)
          .style("opacity", "0")
          .attr("xlink:href", "resources/images/trophy-photos/nfl_allstar.png")
          .transition().delay(1500 + i*500)
          .style("opacity", "1");
    }

    givenSVG.append("text")
          .attr("x", 0)
          .attr("y", 337)
          .attr("font-size", "20px")
          .style("opacity", "0")
          .transition().delay(500)
          .style("opacity", "1")
          .text("Offensive Player of Year");
    for(var i = 0; i < trophies[indexOfPlayer].Offensive.length; i++){
      yearData.push(trophies[indexOfPlayer].Offensive[i]);
      givenSVG.append("image")
          .attr("year", trophies[indexOfPlayer].Offensive[i])
          .attr("x", 80*i)
          .attr("y", 355)
          .attr("width", 70)
          .attr("height", 70)
          .style("opacity", "0")
          .attr("xlink:href", "resources/images/trophy-photos/nfl_offensive.png")
          .transition().delay(1500 + i*500)
          .style("opacity", "1");
    }
  }
  var temp = "";
  var trophyTip = givenSVG.selectAll("image")
          .data(yearData)
          .append("svg:title")
          .attr("class", "tooltip")
          .text(function(d){ return d;});

}

//hardcoded/handpicked trophy data for all of the mvps
var trophies = [
              {Player: "Kobe Bryant",
              MVP: [2008],
              Championship: [2000,2001,2002,2009,2010],
              All_NBA: [1999,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013],
              All_Defense: [2000,2001,2002,2003,2004,2006,2007,2008,2009,2010,2011,2012]},
              {Player: "Steve Nash",
              MVP: [2005, 2006],
              Championship: [],
              All_NBA: [2002,2003,2005,2006,2007,2008,2010],
              All_Defense: []},
              {Player: "Dirk Nowitzki",
              MVP: [2007],
              Championship: [2011],
              All_NBA: [2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012],
              All_Defense: []},
              {Player: "Stephen Curry",
              MVP: [2015],
              Championship: [2015],
              All_NBA: [2014, 2015],
              All_Defense: []},
              {Player: "Kevin Durant",
              MVP: [2014],
              Championship: [],
              All_NBA: [2010,2011,2012,2013,2014],
              All_Defense: []},
              {Player: "LeBron James",
              MVP: [2009,2010,2012,2013],
              Championship: [2012, 2013],
              All_NBA: [2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],
              All_Defense: [2009,2010,2011,2012,2013,2014]},
              {Player: "Derrick Rose",
              MVP: [2011],
              Championship: [],
              All_NBA: [2011],
              All_Defense: []},
              {Player: "Kevin Garnett",
              MVP: [2004],
              Championship: [2008],
              All_NBA: [1999,2000,2001,2002,2003,2004,2005,2006,2007,2008],
              All_Defense: [2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2011,2012]},
              {Player: "Tim Duncan",
              MVP: [2002,2003],
              Championship: [1999,2003,2005,2007,2014],
              All_NBA: [1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2013,2015],
              All_Defense: [2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2013,2015]},
              {Player: "Allen Iverson",
              MVP: [2001],
              Championship: [],
              All_NBA: [1999,2000,2001,2002,2003,2005],
              All_Defense: []},
              {Player: "Allen Iverson",
              MVP: [2000],
              Championship: [2000,2001,2002,2006],
              All_NBA: [1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2009],
              All_Defense: [2000,2001,2003]},
              {Player: "Miguel Cabrera",
              MVP: [2012,2013],
              Championship: [2003],
              Golden_Glove: [],
              Silver_Slugger: [2005,2006,2010,2012,2013,2015]},
              {Player: "Alex Rodriguez",
              MVP: [2003,2005,2007],
              Championship: [2009],
              Golden_Glove: [2002,2003],
              Silver_Slugger: [1996,1998,1999,2000,2001,2002,2003,2005,2007,2008]},
              {Player: "Barry Bonds",
              MVP: [1990,1992,1993,2001,2002,2003,2004],
              Championship: [],
              Golden_Glove: [1990,1991,1992,1993,1994,1996,1997,1998],
              Silver_Slugger: [1990,1991,1992,1993,1994,1996,1997,2000,2001,2002,2003,2004]},
              
              {Player: "Cam Newtown",
              MVP: [2015],
              Championship: [],
              All_Star: [2015],
              Offensive: [2015]},
              {Player: "Aaron Rodgers",
              MVP: [2011, 2014],
              Championship: [2010],
              All_Star: [2011,2012,2014],
              Offensive: [2011]},
              {Player: "Tom Brady",
              MVP: [2011, 2014],
              Championship: [2002, 2004, 2005, 2006],
              All_Star: [2011,2012,2014],
              Offensive: [2011]},
              {Player: "Peyton Manning",
              MVP: [2011, 2014],
              Championship: [2002, 2004, 2005, 2006],
              All_Star: [2011,2012,2014],
              Offensive: [2011]},
              {Player: "Adrian Peterson",
              MVP: [2011, 2014],
              Championship: [2002, 2004, 2005, 2006],
              All_Star: [2011,2012,2014],
              Offensive: [2011]},
              {Player: "LaDainian Tomlinson",
              MVP: [2011, 2014],
              Championship: [2000,2001],
              All_Star: [2011,2014],
              Offensive: [2011]},
              {Player: "Shaun Alexander",
              MVP: [2011, 2014],
              Championship: [2000,2001],
              All_Star: [2011,2014],
              Offensive: [2011]},
              {Player: "Shaun Alexander",
              MVP: [2011, 2014],
              Championship: [],
              All_Star: [2011],
              Offensive: [2011]},
              {Player: "Rich Gannon",
              MVP: [2011, 2014],
              Championship: [],
              All_Star: [2011],
              Offensive: [2011]},
              {Player: "Kurt Warner",
              MVP: [2011, 2014, 2015],
              Championship: [2010],
              All_Star: [2011],
              Offensive: [2011]},
              {Player: "Marshall Faulk",
              MVP: [2011, 2014, 2015],
              Championship: [2010],
              All_Star: [2011],
              Offensive: [2011]},
              
              {Player: "Alex Ovechkin",
              MVP: [2008,2009,2013],
              Championship: [],
              All_Star: [2006,2007,2008,2009,2010,2011,2013,2014,2015],
              Conn_Smythe: []},

              {Player: "Evgeni Malkin",
              MVP: [2012],
              Championship: [2009],
              All_Star: [2008,2009,2012],
              Conn_Smythe: [2009]},
              {Player: "Josh Donaldson",
              MVP: [2015],
              Championship: [],
              Golden_Glove: [],
              Silver_Slugger: [2015]},
              {Player: "Mike Trout",
              MVP: [2014],
              Championship: [],
              Golden_Glove: [],
              Silver_Slugger: [2012,2013,2014,2015]},
              {Player: "Justin Verlander",
              MVP: [2011],
              Championship: [],
              Golden_Glove: [],
              Silver_Slugger: []},
              {Player: "Josh Hamilton",
              MVP: [2010],
              Championship: [],
              Golden_Glove: [],
              Silver_Slugger: [2008,2010,2012]},
              {Player: "Joe Mauer",
              MVP: [2009],
              Championship: [],
              Golden_Glove: [2008,2009,2010],
              Silver_Slugger: [2006,2008,2009,2010,2013]},
              {Player: "Dustin Pedroia",
              MVP: [2008],
              Championship: [2007,2013],
              Golden_Glove: [2008,2011,2013,2014],
              Silver_Slugger: [2008]},
              {Player: "Justin Morneau",
              MVP: [2006],
              Championship: [],
              Golden_Glove: [],
              Silver_Slugger: [2006,2008]},
              {Player: "Vladimir Guerrero",
              MVP: [2004],
              Championship: [],
              Golden_Glove: [],
              Silver_Slugger: [1999,2000,2002,2004,2005,2006,2007,2010]},
              {Player: "Miguel Tejada",
              MVP: [2002],
              Championship: [],
              Golden_Glove: [],
              Silver_Slugger: [2004, 2005]},
              {Player: "Ichiro Suzuki",
              MVP: [2001],
              Championship: [],
              Golden_Glove: [2001,2002,2003,2004,2005,2006,2007,2008,2009,2010],
              Silver_Slugger: [2001,2007,2009]},
              {Player: "Jason Giambi",
              MVP: [2000],
              Championship: [],
              Golden_Glove: [],
              Silver_Slugger: [2001,2002]},
              {Player: "Bryce Harper",
              MVP: [2015],
              Championship: [],
              Golden_Glove: [],
              Silver_Slugger: [2015]},
              {Player: "Clayton Kershaw",
              MVP: [2014],
              Championship: [],
              Golden_Glove: [2011],
              Silver_Slugger: []},
              {Player: "Andrew McCutchen",
              MVP: [2013],
              Championship: [],
              Golden_Glove: [2012],
              Silver_Slugger: [2012,2013,2014,2015]},
              {Player: "Buster Posey",
              MVP: [2012],
              Championship: [2010,2012,2014],
              Golden_Glove: [],
              Silver_Slugger: [2012,2014,2015]},
              {Player: "Ryan Braun",
              MVP: [2011],
              Championship: [],
              Golden_Glove: [],
              Silver_Slugger: [2008,2009,2010,2011,2012]},
              {Player: "Joey Votto",
              MVP: [2010],
              Championship: [],
              Golden_Glove: [2011],
              Silver_Slugger: []},
              {Player: "Albert Pujols",
              MVP: [2005,2008,2009],
              Championship: [2006,2011],
              Golden_Glove: [],
              Silver_Slugger: [2001,2003,2004,2008,2009,2010]},
              {Player: "Jimmy Rollins",
              MVP: [2007],
              Championship: [2008],
              Golden_Glove: [2007,2008,2009,2012],
              Silver_Slugger: [2007]},
              {Player: "Ryan Howard",
              MVP: [2006],
              Championship: [2008],
              Golden_Glove: [],
              Silver_Slugger: [2006]},
              {Player: "Jeff Kent",
              MVP: [2000],
              Championship: [],
              Golden_Glove: [],
              Silver_Slugger: [2000,2001,2002,2005]},

              {Player: "Alex Ovechkin",
              MVP: [2008,2009,2013],
              Championship: [],
              All_Star: [2006,2007,2008,2009,2010,2011,2013,2014,2015],
              Conn_Smythe: []},

              {Player: "Evgeni Malkin",
              MVP: [2012],
              Championship: [2009],
              All_Star: [2008,2009,2012],
              Conn_Smythe: [2009]},

              {Player: "Carey Price",
              MVP: [2015],
              Championship: [],
              All_Star: [2015],
              Conn_Smythe: []},

              {Player: "Sidney Crosby",
              MVP: [2007,2014],
              Championship: [2009],
              All_Star: [2007,2010,2013,2014,2015],
              Conn_Smythe: []},

              {Player: "Corey Perry",
              MVP: [2011],
              Championship: [2007],
              All_Star: [2010,2013],
              Conn_Smythe: []},

              {Player: "Henrik Sedin",
              MVP: [2010],
              Championship: [],
              All_Star: [2010,2011],
              Conn_Smythe: []},

              {Player: "Joe Thornton",
              MVP: [2006],
              Championship: [],
              All_Star: [2003, 2006, 2008],
              Conn_Smythe: []},

              {Player: "Martin St.Louis",
              MVP: [2004],
              Championship: [2004],
              All_Star: [2003, 2006, 2009, 2010, 2012],
              Conn_Smythe: []},

              {Player: "Peter Forsberg",
              MVP: [2003],
              Championship: [1996, 2001],
              All_Star: [1998,1999,2003],
              Conn_Smythe: []},

              {Player: "Jose Theodore",
              MVP: [2002],
              Championship: [],
              All_Star: [2002],
              Conn_Smythe: []},

              {Player: "Joe Sakic",
              MVP: [2001],
              Championship: [1996,2001],
              All_Star: [2001,2002,2004],
              Conn_Smythe: [1996]},

              {Player: "Chris Pronger",
              MVP: [2000],
              Championship: [2007],
              All_Star: [1998, 2000, 2004, 2007],
              Conn_Smythe: []}
              
              ];
</script>

</html>
